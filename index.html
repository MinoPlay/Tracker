<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consumption Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@3.0.0/index.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š Consumption Tracker</h1>
        </header>

        <!-- GitHub Configuration -->
        <section class="config-section" id="config-section">
            <h2>âš™ï¸ Configuration</h2>
            <div class="mode-toggle">
                <button onclick="setMode('local')" class="mode-btn" id="mode-local">ğŸ  Local Mode</button>
                <button onclick="setMode('github')" class="mode-btn" id="mode-github">ğŸ™ GitHub Mode</button>
            </div>
            <div class="config-form" id="github-config">
                <input type="password" id="github-token" placeholder="GitHub Personal Access Token" autocomplete="off">
                <input type="text" id="repo-owner" placeholder="GitHub Username" autocomplete="off">
                <input type="text" id="repo-name" placeholder="Repository Name" autocomplete="off">
                <button onclick="saveConfig()" class="btn-save">Save Configuration</button>
            </div>
            <div class="local-controls" id="local-controls" style="display: none;">
                <button onclick="generateDummyData()" class="btn-generate">ğŸ² Generate Sample Data</button>
                <button onclick="clearLocalData()" class="btn-clear">ğŸ—‘ï¸ Clear All Data</button>
            </div>
            <button onclick="toggleConfig()" class="btn-toggle">Hide Config</button>
            <p class="config-help" id="github-help">
                Create a token with 'repo' scope at 
                <a href="https://github.com/settings/tokens/new" target="_blank">GitHub Settings</a>
            </p>
            <p class="config-help" id="local-help" style="display: none;">
                Local mode stores data in your browser's localStorage. Data persists between sessions.
            </p>
        </section>

        <!-- Status Messages -->
        <div id="status" class="status hidden"></div>

        <!-- Category Buttons -->
        <section class="tracking-section">
            <h2>Track Consumption</h2>
            <div class="category-buttons">
                <button onclick="addEntry('beer')" class="category-btn beer">
                    ğŸº Beer
                </button>
                <button onclick="addEntry('wine')" class="category-btn wine">
                    ğŸ· Wine
                </button>
                <button onclick="addEntry('liquor')" class="category-btn liquor">
                    ğŸ¥ƒ Liquor
                </button>
                <button onclick="addEntry('smoking')" class="category-btn smoking">
                    ğŸ’¨ Hookah
                </button>
            </div>
        </section>

        <!-- Statistics Section with Tabs -->
        <section class="chart-section">
            <div class="chart-header">
                <h2>Statistics</h2>
                <select id="time-period" onchange="updateChart()">
                    <option value="7" selected>Last 7 Days</option>
                    <option value="30">Last 30 Days</option>
                    <option value="90">Last 90 Days</option>
                    <option value="365">Last 365 Days</option>
                </select>
            </div>
            
            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-btn active" onclick="switchTab('chart')">ğŸ“Š Chart</button>
                <button class="tab-btn" onclick="switchTab('table')">ğŸ“‹ Table</button>
                <button class="tab-btn" onclick="switchTab('overview')">ğŸ“ˆ Overview</button>
            </div>
            
            <!-- Tab Content: Chart View -->
            <div id="tab-chart" class="tab-content active">
                <div class="chart-container">
                    <canvas id="consumptionChart"></canvas>
                </div>
                <div class="summary-stats" id="summary-stats"></div>
            </div>
            
            <!-- Tab Content: Table View -->
            <div id="tab-table" class="tab-content">
                <div class="table-container">
                    <table id="stats-table" class="stats-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>ğŸº Beer</th>
                                <th>ğŸ· Wine</th>
                                <th>ğŸ¥ƒ Liquor</th>
                                <th>ğŸ’¨ Hookah</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tab Content: Overview -->
            <div id="tab-overview" class="tab-content">
                <div class="overview-grid" id="overview-grid">
                </div>
            </div>
        </section>

        <!-- Entry History -->
        <section class="history-section">
            <h2>Recent Entries</h2>
            <div id="entries-list" class="entries-list">
                <p class="empty-message">No entries yet. Click a category button to start tracking!</p>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>
